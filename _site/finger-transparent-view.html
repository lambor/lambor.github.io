<html><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1" /><title>径向羽化 FingerTransparentView</title><meta name="twitter:card" content="summary" /><meta name="twitter:site" content="@drak11t" /><meta name="twitter:title" content="径向羽化 FingerTransparentView" /><meta name="twitter:description" content="前不久群里有人问怎么实现「类似 Instagram 径向模糊透露手指底部内容」的效果。因为要实时用算法羽化其实挺麻烦的，效率也不见得好，于是我当即很快提供了一个思路便是通过 Ps 做一张中心透明，边缘羽化的图片，再结合 Android 自定义 View 常用的 Canvas 与 Paint 这两个类的混合模式 Xfermode，在白板上挖出一个能容纳这张羽化图片的洞，混合去除，再将羽化图片填..."><meta name="description" content="前不久群里有人问怎么实现「类似 Instagram 径向模糊透露手指底部内容」的效果。因为要实时用算法羽化其实挺麻烦的，效率也不见得好，于是我当即很快提供了一个思路便是通过 Ps 做一张中心透明，边缘羽化的图片，再结合 Android 自定义 View 常用的 Canvas 与 Paint 这两个类的混合模式 X..."><link rel="icon" href="/assets/favicon.png"><link rel="apple-touch-icon" href="/assets/gravatar.png"><link rel="stylesheet" href="//code.cdn.mozilla.net/fonts/fira.css"><link rel="stylesheet" href="/assets/core.css"><link rel="canonical" href="/finger-transparent-view"><link rel="alternate" type="application/atom+xml" title="Black history of Drakeet" href="/feed.xml" /></head><body><aside class="logo"> <a href="/"> <img class="gravatar" width="80px" height="80px" src="/assets/gravatar.png"> </a> <span class="logo-prompt">返回</span></aside><main> <noscript><style> article .footnotes { display: block; }</style></noscript><article><div class="center"><h1>径向羽化 FingerTransparentView</h1><time>8 6, 2015</time></div><div class="divider"></div><p>前不久群里有人问怎么实现「类似 Instagram 径向模糊透露手指底部内容」的效果。因为要实时用算法羽化其实挺麻烦的，效率也不见得好，于是我当即很快提供了一个思路便是通过 Ps 做一张中心透明，边缘羽化的图片，再结合 Android 自定义 <code class="highlighter-rouge">View</code> 常用的 <code class="highlighter-rouge">Canvas</code> 与 <code class="highlighter-rouge">Paint</code> 这两个类的混合模式 <code class="highlighter-rouge">Xfermode</code>，在白板上挖出一个能容纳这张羽化图片的洞，混合去除，再将羽化图片填充进去即可。</p><p><img src="/assets/img/2015-08-06-finger.gif" alt="device-2015-08-06-133045-d" width="162" height="288" /></p><p>说来抽象，结果便是如 GIF 图所示。正好那天比较闲，想得快，做得也快，一个钟头完全靠着自己就几乎完美实现了。</p><p>Maven:</p><div class="highlighter-rouge"><pre class="highlight"><code><span class="n">dependencies</span> <span class="o">{</span>
    <span class="n">compile</span> <span class="s1">'me.drakeet.fingertransparentview:fingertransparentview:1.0.1'</span>
<span class="o">}</span>
</code></pre></div><p>不过，一般人可能不会用到这个东西，之所以在这边写出来，觉得它还是挺不错的一个自定义 View 教程，开发者可以看看源码学习下也不错，主要可以学到的内容有：</p><ul><li>双指缩放 <code class="highlighter-rouge">Bitmap</code></li><li>触摸事件分发与传递</li><li>Android 提供的混合绘图接口 <code class="highlighter-rouge">Xfermode</code></li><li>自定义 <code class="highlighter-rouge">View</code> 的一些流程</li></ul><p>源代码：<a href="https://github.com/drakeet/FingerTransparentView" target="_blank">https://github.com/drakeet/FingerTransparentView</a></p><p>遗留小问题：眼尖的同学可能会发现使劲看可以看得出图片边缘，这主要是 <code class="highlighter-rouge">baseColor</code> 我偷懒直接使用 <code class="highlighter-rouge">Color.WHITE</code> 衔接不完美导致的，可以通过调整这个变量获得完美衔接，或者重新 P 一张羽化图片也行。</p></article></main></body></html>